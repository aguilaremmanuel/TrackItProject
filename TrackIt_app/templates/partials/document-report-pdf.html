{% load tz %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document Report</title>
    <style>

        @page {
            margin: 40pt 60pt;
        }

        body, html {
            font-family: Helvetica, sans-serif;
            font-size: 8.8pt;
            box-sizing: border-box;
        }

        table, th, td {
            border-collapse: collapse;
        }

        .logs-table {
            border: 1px solid black;
            width: 100%;
            border-spacing: 0;  /* No gap between cells */
            table-layout: fixed;
            box-sizing: content-box;
        }

        thead {
            font-weight: bold;
        }

        .logs-table td {
            padding: 5px;
            text-align: left; /* Align text to the left */
            vertical-align: top; /* Align text to the top */
            white-space: normal;
        }

        
    </style>
</head>

    <body>

        <p style="text-align: center; font-size: 12pt; font-weight: 700;">DOCUMENT REPORT</p>

        <div style="margin-top: 30pt;">
            <table style="width: 100%;">
                <tr>
                    <td style="text-align: left; width: 50%;"><b>Tracking Number:</b> {{document.tracking_no}}</td>
                    <td style="text-align: right; width: 50%;"><b>Date of Report:</b> {{now|date:"m/d/Y"}}</td>
                </tr>
                <tr>
                    <td colspan="2"><b>Status:</b> {{document.status}}</td>
                </tr>
                <tr>
                    <td colspan="2"><b>Sender & Department:</b> {{document.sender_name|title}} - {{document.sender_department}}</td>
                </tr>
                <tr>
                    <td colspan="2"><b>Type:</b> {{document.document_type.category}} - {{document.document_type.document_type}}</td>
                </tr>
                <tr>
                    <td colspan="2"><b>Priority Level:</b> {{document.document_type.priority_level.priority_level|title}}</td>
                </tr>
            </table>
        </div>

        <p><b>Subject/Particulars:</b> {{document.subject}}</p>

        <p><b>Document Logs:</b></p>

        <table class="logs-table">
            <thead>
                <tr>
                    <td>Timestamp</td>
                    <td>Employee ID</td>
                    <td>User</td>
                    <td>Office</td>
                    <td>Remarks</td>
                    <td>Activity</td>
                </tr>
            </thead>
            <tbody>
                {% for log in logs %}
                    <tr>    
                        <td>{{ log.time_stamp|date:"Y-m-d" }}<br>{{ log.time_stamp|timezone:"Asia/Manila"|date:"h:i A"}}</td>
                        <td>{{ log.user_id.employee_id}}</td>
                        <td>{{ log.user_id.firstname|title }} {{ log.user_id.lastname|title}}</td>
                        <td>{{ log.user_id.office_id.office_name}}</td>
                        <td><i>{{ log.remarks.remarks}}</i></td>
                        <td>{{ log.activity }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        
        <p style="margin-top: 80pt;">Report generated by,</p>
        <p><b>{{ reporter }}</b></p>
        
    </body>
</html>
